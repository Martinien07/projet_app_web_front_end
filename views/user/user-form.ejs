<%- include("../partials/sidebar") %>  
</div></div>

<div id="main">
  <%- include("../partials/header") %>

  <div class="page-heading">
    <div class="page-title">
      <div class="row">
        <div class="col-12 col-md-6 order-md-1 order-last">
          <h3><%= user ? "Modifier un utilisateur" : "Ajouter un utilisateur" %></h3>
          <p class="text-subtitle text-muted">
            Gestion des utilisateurs du système.
          </p>
        </div>
        <div class="col-12 col-md-6 order-md-2 order-first">
          <nav aria-label="breadcrumb" class="breadcrumb-header float-start float-lg-end">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
              <li class="breadcrumb-item active" aria-current="page">
                <%= user ? "Modifier utilisateur" : "Ajout utilisateur" %>
              </li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <section id="multiple-column-form">
    <div class="row match-height">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">
              <%= user ? "Modifier l'utilisateur" : "Créer un utilisateur" %>
            </h4>
          </div>

          <div class="card-content">
            <div class="card-body">

              <form class="form" action="<%= user ? '/users/update/' + user.id : '/users/create' %>" method="POST">

                <div class="row">

                  <!-- Nom -->
                  <div class="col-md-6 col-12">
                    <div class="form-group mandatory">
                      <label for="name" class="form-label">Nom complet</label>
                      <input
                        type="text"
                        id="name"
                        class="form-control"
                        name="name"
                        value="<%= user ? user.name : '' %>"
                        required
                      />
                    </div>
                  </div>

                  <!-- Email -->
                  <div class="col-md-6 col-12">
                    <div class="form-group mandatory">
                      <label for="email" class="form-label">Email</label>
                      <input
                        type="email"
                        id="email"
                        class="form-control"
                        name="email"
                        value="<%= user ? user.email : '' %>"
                        required
                      />
                    </div>
                  </div>

                  <!-- Téléphone -->
                  <div class="col-md-6 col-12">
                    <div class="form-group mandatory">
                      <label for="phone" class="form-label">Téléphone</label>
                      <input
                        type="text"
                        id="phone"
                        class="form-control"
                        name="phone"
                        value="<%= user ? user.phone : '' %>"
                        required
                      />
                    </div>
                  </div>

                  <!-- Statut -->
                  <div class="col-md-6 col-12">
                    <div class="form-group mandatory">
                      <fieldset>
                        <label class="form-label">Status</label>

                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="status"
                            value="active"
                            <%= user && user.status === "active" ? "checked" : "" %>
                          />
                          <label class="form-check-label">Actif</label>
                        </div>

                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="status"
                            value="inactive"
                            <%= user && user.status === "inactive" ? "checked" : "" %>
                          />
                          <label class="form-check-label">Inactif</label>
                        </div>

                      </fieldset>
                    </div>
                  </div>

                  <!-- Accès / Rôle -->
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="access" class="form-label">Rôle / Accès</label>
                      <select class="form-control" name="access" id="access">
                        <option value="user" <%= user && user.access === "user" ? "selected" : "" %>>Utilisateur</option>
                        <option value="admin" <%= user && user.access === "admin" ? "selected" : "" %>>Administrateur</option>
                      </select>
                    </div>
                  </div>

                  <!-- Mot de passe (seulement en création ou si modifié) -->
                  <% if (!user) { %>
                  <div class="col-md-6 col-12">
                    <div class="form-group mandatory">
                      <label for="password" class="form-label">Mot de passe</label>
                      <input
                        type="password"
                        class="form-control"
                        name="password"
                        required
                      />
                    </div>
                  </div>
                  <% } %>

                </div>

                <div class="row mt-4">
                  <div class="col-12 d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary me-1 mb-1">
                      Enregistrer
                    </button>

                    <a href="/users/list-user" class="btn btn-light-secondary me-1 mb-1">
                      Annuler
                    </a>
                  </div>
                </div>

              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <%- include("../partials/footer") %>
</div>
    </div>
    <script src="../../assets/static/js/components/dark.js"></script>
    <script src="../../assets/extensions/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    
    
    <script src="../../assets/compiled/js/app.js"></script>
    

    
<script src="../../assets/extensions/jquery/jquery.min.js"></script>
<script src="../../assets/extensions/parsleyjs/parsley.min.js"></script>
<script src="../../assets/static/js/pages/parsley.js"></script>

</body>

</html>